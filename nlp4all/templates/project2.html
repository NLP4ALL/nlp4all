{% extends "layout.html" %}
{% block content %}
  <h1>Project Title: {{ project.name }} </h1>
<br>
<div class="content-section">
<h2>My analyses on project {{ project.name }} </h2>
{% for a in analyses %}
    <div class="content-section">
        <a class="nav-item nav-link" href="{{ url_for('analysis') }}?analysis={{a.id}}">{{a.name}}</a>
    </div>
{% endfor %}
</div>

{% for p in projects %}
    <a class="nav-item nav-link" href="{{ url_for('project') }}?project={{ p.id }}">p.name</a>
{% endfor %}
<div class="content-section">
<h1>Create New Analysis</h1>
    <form method="POST" action="">
        <div class="select_menu">
            <label for="proj_type">Choose the type of analysis: </label>
            <select id="proj_type">
                <option value="shared_bayesian_analysis">Shared bayesian analysis</option>
                <option value="individual_bayesian_analysis">Individual bayesian analysis</option>
                <option value="word_embedding">Word embedding analysis</option>
            </select>
        </div>
    </form>
</div>
<div class="content-section" id="bayesian_form">
    <form method="POST" action="">
    {{ bayesian_form.hidden_tag() }}
        <fieldset class="form-group">
            <div class="form-group">
                {{ bayesian_form.name.label(class="form-control-label") }}
                {% if bayesian_form.name.errors %}
                    {{ bayesian_form.name(class="form-control form-control-lg is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in bayesian_form.name.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ bayesian_form.name(class="form-control form-control-lg") }}
                {% endif %}
            </div>
                <div class="form-check">
                    {{ bayesian_form.annotate(class="form-check-input") }}
                    {{ bayesian_form.annotate.label(class="form-check-label") }}
                </div>
            <div class="form-group">
                {{ bayesian_form.number.label(class="form-control-label") }}
                {% if bayesian_form.number.errors %}
                    {{ bayesian_form.number(class="form-control form-control-lg is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in bayesian_form.number.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ bayesian_form.number(class="form-control form-control-lg") }}
                {% endif %}
            </div>
        </fieldset>
        <div class="form-group">
            {{ bayesian_form.submit(class="btn btn-outline-info") }}
        </div>
    </form>
</div>
<div class="content-section" id="embedding_form" style="visibility:hidden">
    <form method="POST" action="">
    {{ embedding_form.hidden_tag() }}
        <fieldset class="form-group">
            <div class="form-group">
                {{ embedding_form.name.label(class="form-control-label") }}
                {% if embedding_form.name.errors %}
                    {{ embedding_form.name(class="form-control form-control-lg is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in embedding_form.name.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ embedding_form.name(class="form-control form-control-lg") }}
                {% endif %}
            </div>
                <div class="form-check">
                    {{ embedding_form.d2v(class="form-check-input") }}
                    {{ embedding_form.d2v.label(class="form-check-label") }}
                </div>
            <div class="form-group">
                {{ embedding_form.vector_size.label(class="form-control-label") }}
                {% if embedding_form.vector_size.errors %}
                    {{ embedding_form.vector_size(class="form-control form-control-lg is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in embedding_form.vector_size.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ embedding_form.vector_size(class="form-control form-control-lg") }}
                {% endif %}
            </div>
            <div class="form-group">
                {{ embedding_form.epochs.label(class="form-control-label") }}
                {% if embedding_form.epochs.errors %}
                    {{ embedding_form.epochs(class="form-control form-control-lg is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in embedding_form.epochs.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ embedding_form.epochs(class="form-control form-control-lg") }}
                {% endif %}
            </div>
            <div class="form-group">
                    {{ embedding_form.training_set.label(class="form-control-label")}}<br>
                    {{ embedding_form.training_set(class="form-control form-control-lg")}}
                    {% for error in embedding_form.training_set.errors %}
                        <span style="color :red;">[{{ error }}]</span>
                    {% endfor %}
                </div>
        </fieldset>
        <div class="form-group">
            {{ embedding_form.submit(class="btn btn-outline-info") }}
        </div>
    </form>
</div>
<script>
    var select_form = document.getElementById("proj_type");
    var bayesian_form = document.getElementById("bayesian_form");
    var embedding_form = document.getElementById("embedding_form");
    function f1() {
         if (select_form.value == "individual_bayesian_analysis") {
            bayesian_form.style.visibility = "visible";
            embedding_form.style.visibility = "hidden";
            }
        else if (select_form.value == "shared_bayesian_analysis") {
            bayesian_form.style.visibility = "visible";
            embedding_form.style.visibility = "hidden";
            }
        else if (select_form.value == "word_embedding") {
            bayesian_form.style.visibility = "hidden";
            embedding_form.style.visibility = "visible";
            };
    };
    window.onload = function() {
        select_form.onchange = function fun() {
            f1();
        };
    };
</script>
{% endblock content %}
