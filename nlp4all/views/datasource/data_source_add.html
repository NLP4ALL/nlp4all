{% extends "layout.html" %}
{% block content %}
    <div class="content-section">
        <form method="POST" action="" enctype="multipart/form-data">
            {{ form.hidden_tag() }}
            <fieldset class="mb-3">
                <legend class="border-bottom mb-4">Create new data source</legend>
                <div class="mb-3">
                    {{ form.data_source_name.label(class="form-label") }}
                    {% if form.data_source_name.errors %}
                        {{ form.data_source_name(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in form.data_source_name.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ form.data_source_name(class="form-control form-control-lg") }}
                    {% endif %}
                </div>
                <div class="mb-3">
                    {{ form.data_source_description.label(class="form-label")}}<br>
                    {{ form.data_source_description(class="form-control form-control-lg")}}
                </div>
                <div class="mb-3">
                    {{ form.data_source.label(class="form-label")}}<br>
                    {{ form.data_source(class="form-control form-control-lg")}}
                    {% for error in form.data_source.errors %}
                        <span style="color :red;">[{{ error }}]</span>
                    {% endfor %}
                </div>
            </fieldset>
            <div class="mb-3">
                {{ form.submit(class="btn btn-outline-info") }}
            </div>
        </form>
    </div>
<script type="text/javascript">
    // $.ajax({
    //     xhr: function() {
    //         var xhr = new window.XMLHttpRequest();

    //         xhr.upload.addEventListener("progress", function(evt) {
    //         if (evt.lengthComputable) {
    //             var percentComplete = evt.loaded / evt.total;
    //             percentComplete = parseInt(percentComplete * 100);
    //             console.log(percentComplete);

    //             if (percentComplete === 100) {

    //             }

    //         }
    //         }, false);

    //         return xhr;
    //     },
    //     url: posturlfile,
    //     type: "POST",
    //     data: JSON.stringify(fileuploaddata),
    //     contentType: "application/json",
    //     dataType: "json",
    //     success: function(result) {
    //         console.log(result);
    //     }
    // });
</script>
{% endblock content %}